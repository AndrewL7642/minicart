/*!
 * minicart
 *
 * Improve your PayPal integration by creating an overlay which appears as a user adds products to their cart.
 *
 * @version 3.0.0 - 2013-10-08
 * @author Jeff Harrell <https://github.com/jeffharrell/>
 * @url http://www.minicartjs.com/ 
 * @license MIT <https://github.com/jeffharrell/MiniCart/raw/master/LICENSE>
 */
"use strict";function Product(a){this._data=a,this._eventCache={}}function Cart(a){var b,c;for(this._eventCache={},this._products=[],b=0,c=a.length;c>b;b++)this.add(a[b])}function addItem(){ui.show()}function changeItem(){ui.show()}function removeItem(){ui.show()}function bindForm(){}var config=module.exports={template:"",parent:document&&document.body};module.exports.load=function(a){for(var b in a)config[b]=a[b]},Product.prototype.on=function(a,b){var c=this._eventCache[a];c||(c=this._eventCache[a]=[]),c.push(b)},Product.prototype.off=function(a,b){var c,d,e=this._eventCache[a];if(e)for(c=0,d=e.length;d>c;c++)e[c]===b&&(e=e.splice(c,1))},Product.prototype.fire=function(a){var b,c,d,e=this._eventCache[a];if(e)for(b=0,c=e.length;c>b;b++)d=e[b],"function"==typeof d&&d.apply(this,Array.prototype.slice.call(arguments,1))},Product.prototype.get=function(a){return this._data[a]},Product.prototype.set=function(a,b){var c=(this._data[a]=b,{});c[a]=b,this.fire("change",c)},Product.prototype.destroy=function(){this._data=[],this.fire("destroy",this)},module.exports=Product;var Product=require("./product");Cart.prototype.on=function(a,b){var c=this._eventCache[a];c||(c=this._eventCache[a]=[]),c.push(b)},Cart.prototype.off=function(a,b){var c,d,e=this._eventCache[a];if(e)for(c=0,d=e.length;d>c;c++)e[c]===b&&(e=e.splice(c,1))},Cart.prototype.fire=function(a){var b,c,d,e=this._eventCache[a];if(e)for(b=0,c=e.length;c>b;b++)d=e[b],"function"==typeof d&&d.apply(this,Array.prototype.slice.call(arguments,1))},Cart.prototype.add=function(a){var b=this,c=new Product(a),d=this._products.push(a)-1;return c.on("change",function(a,c){b.fire("change",d,a,c)}),this.fire("add",d,a),d},Cart.prototype.get=function(a){return this._products[a]},Cart.prototype.getAll=function(){return this._products},Cart.prototype.total=function(){var a,b,c=this.getAll(),d=0;for(a=0,b=c.length;b>a;a++)d+=parseFloat(c[a].amount,2);return d.toFixed(2)},Cart.prototype.remove=function(a){var b=this._products.splice(a,1);return b&&this.fire("remove",a,b[0]),!!b.length},Cart.prototype.destroy=function(){this._products=[],this.fire("destroy")},module.exports=Cart;var Product=require("./product"),Cart=require("./cart"),config=require("./config"),isShowing=!1,ui={},cartModel;ui.render=function(a){config.load(a),cartModel=new Cart,cartModel.on("add",addItem),cartModel.on("change",changeItem),cartModel.on("remove",removeItem)},ui.show=function(){isShowing||(config.parent.addClass("show"),isShowing=!0)},ui.hide=function(){isShowing&&(config.parent.removeClass("show"),isShowing=!1)},ui.toggle=function(){ui[isShowing?"hide":"show"]()},ui.reset=function(){ui.hide(),cartModel.destroy()},module.exports=ui,"object"!=typeof JSON&&(JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();