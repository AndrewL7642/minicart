/*!
 * minicart
 *
 * Improve your PayPal integration by creating an overlay which appears as a user adds products to their cart.
 *
 * @version 3.0.0 - 2013-10-09
 * @author Jeff Harrell <https://github.com/jeffharrell/>
 * @url http://www.minicartjs.com/ 
 * @license MIT <https://github.com/jeffharrell/MiniCart/raw/master/LICENSE>
 */
"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){var rsplit=function(a,b){for(var c,d,e,f=b.exec(a),g=new Array;null!=f;)c=f.index,d=b.lastIndex,0!=c&&(e=a.substring(0,c),g.push(a.substring(0,c)),a=a.slice(c)),g.push(f[0]),a=a.slice(f[0].length),f=b.exec(a);return""==!a&&g.push(a),g},chop=function(a){return a.substr(0,a.length-1)},extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};EJS=function(a){if(a="string"==typeof a?{view:a}:a,this.set_options(a),a.precompiled)return this.template={},this.template.process=a.precompiled,EJS.update(this.name,this),void 0;if(a.element){if("string"==typeof a.element){var b=a.element;if(a.element=document.getElementById(a.element),null==a.element)throw b+"does not exist!"}this.text=a.element.value?a.element.value:a.element.innerHTML,this.name=a.element.id,this.type="["}else if(a.url){a.url=EJS.endExt(a.url,this.extMatch),this.name=this.name?this.name:a.url;var c=a.url,d=EJS.get(this.name,this.cache);if(d)return d;if(d==EJS.INVALID_PATH)return null;try{this.text=EJS.request(c+(this.cache?"":"?"+Math.random()))}catch(e){}if(null==this.text)throw{type:"EJS",message:"There is no template at "+c}}var d=new EJS.Compiler(this.text,this.type);d.compile(a,this.name),EJS.update(this.name,this),this.template=d},EJS.prototype={render:function(a,b){a=a||{},this._extra_helpers=b;var c=new EJS.Helpers(a,b||{});return this.template.process.call(a,a,c)},update:function(element,options){return"string"==typeof element&&(element=document.getElementById(element)),null==options?(_template=this,function(a){EJS.prototype.update.call(_template,element,a)}):("string"==typeof options?(params={},params.url=options,_template=this,params.onComplete=function(request){var object=eval(request.responseText);EJS.prototype.update.call(_template,element,object)},EJS.ajax_request(params)):element.innerHTML=this.render(options),void 0)},out:function(){return this.template.out},set_options:function(a){this.type=a.type||EJS.type,this.cache=null!=a.cache?a.cache:EJS.cache,this.text=a.text||null,this.name=a.name||null,this.ext=a.ext||EJS.ext,this.extMatch=new RegExp(this.ext.replace(/\./,"."))}},EJS.endExt=function(a,b){return a?(b.lastIndex=0,a+(b.test(a)?"":this.ext)):null},EJS.Scanner=function(a,b,c){extend(this,{left_delimiter:b+"%",right_delimiter:"%"+c,double_left:b+"%%",double_right:"%%"+c,left_equal:b+"%=",left_comment:b+"%#"}),this.SplitRegexp="["==b?/(\[%%)|(%%\])|(\[%=)|(\[%#)|(\[%)|(%\]\n)|(%\])|(\n)/:new RegExp("("+this.double_left+")|(%%"+this.double_right+")|("+this.left_equal+")|("+this.left_comment+")|("+this.left_delimiter+")|("+this.right_delimiter+"\n)|("+this.right_delimiter+")|(\n)"),this.source=a,this.stag=null,this.lines=0},EJS.Scanner.to_text=function(a){return null==a||void 0===a?"":a instanceof Date?a.toDateString():a.toString?a.toString():""},EJS.Scanner.prototype={scan:function(a){if(scanline=this.scanline,regex=this.SplitRegexp,""==!this.source)for(var b=rsplit(this.source,/\n/),c=0;c<b.length;c++){var d=b[c];this.scanline(d,regex,a)}},scanline:function(a,b,c){this.lines++;for(var d=rsplit(a,b),e=0;e<d.length;e++){var f=d[e];if(null!=f)try{c(f,this)}catch(g){throw{type:"EJS.Scanner",line:this.lines}}}}},EJS.Buffer=function(a,b){this.line=new Array,this.script="",this.pre_cmd=a,this.post_cmd=b;for(var c=0;c<this.pre_cmd.length;c++)this.push(a[c])},EJS.Buffer.prototype={push:function(a){this.line.push(a)},cr:function(){this.script=this.script+this.line.join("; "),this.line=new Array,this.script=this.script+"\n"},close:function(){if(this.line.length>0){for(var a=0;a<this.post_cmd.length;a++)this.push(pre_cmd[a]);this.script=this.script+this.line.join("; "),line=null}}},EJS.Compiler=function(a,b){this.pre_cmd=["var ___ViewO = [];"],this.post_cmd=new Array,this.source=" ",null!=a&&("string"==typeof a?(a=a.replace(/\r\n/g,"\n"),a=a.replace(/\r/g,"\n"),this.source=a):a.innerHTML&&(this.source=a.innerHTML),"string"!=typeof this.source&&(this.source="")),b=b||"<";var c=">";switch(b){case"[":c="]";break;case"<":break;default:throw b+" is not a supported deliminator"}this.scanner=new EJS.Scanner(this.source,b,c),this.out=""},EJS.Compiler.prototype={compile:function(options,name){options=options||{},this.out="";var put_cmd="___ViewO.push(",insert_cmd=put_cmd,buff=new EJS.Buffer(this.pre_cmd,this.post_cmd),content="",clean=function(a){return a=a.replace(/\\/g,"\\\\"),a=a.replace(/\n/g,"\\n"),a=a.replace(/"/g,'\\"')};this.scanner.scan(function(a,b){if(null==b.stag)switch(a){case"\n":content+="\n",buff.push(put_cmd+'"'+clean(content)+'");'),buff.cr(),content="";break;case b.left_delimiter:case b.left_equal:case b.left_comment:b.stag=a,content.length>0&&buff.push(put_cmd+'"'+clean(content)+'")'),content="";break;case b.double_left:content+=b.left_delimiter;break;default:content+=a}else switch(a){case b.right_delimiter:switch(b.stag){case b.left_delimiter:"\n"==content[content.length-1]?(content=chop(content),buff.push(content),buff.cr()):buff.push(content);break;case b.left_equal:buff.push(insert_cmd+"(EJS.Scanner.to_text("+content+")))")}b.stag=null,content="";break;case b.double_right:content+=b.right_delimiter;break;default:content+=a}}),content.length>0&&buff.push(put_cmd+'"'+clean(content)+'")'),buff.close(),this.out=buff.script+";";var to_be_evaled="/*"+name+"*/this.process = function(_CONTEXT,_VIEW) { try { with(_VIEW) { with (_CONTEXT) {"+this.out+" return ___ViewO.join('');}}}catch(e){e.lineNumber=null;throw e;}};";try{eval(to_be_evaled)}catch(e){if("undefined"==typeof JSLINT)throw e;JSLINT(this.out);for(var i=0;i<JSLINT.errors.length;i++){var error=JSLINT.errors[i];if("Unnecessary semicolon."!=error.reason){error.line++;var e=new Error;throw e.lineNumber=error.line,e.message=error.reason,options.view&&(e.fileName=options.view),e}}}}},EJS.config=function(a){EJS.cache=null!=a.cache?a.cache:EJS.cache,EJS.type=null!=a.type?a.type:EJS.type,EJS.ext=null!=a.ext?a.ext:EJS.ext;var b=EJS.templates_directory||{};EJS.templates_directory=b,EJS.get=function(a,c){return 0==c?null:b[a]?b[a]:null},EJS.update=function(a,c){null!=a&&(b[a]=c)},EJS.INVALID_PATH=-1},EJS.config({cache:!0,type:"<",ext:".ejs"}),EJS.Helpers=function(a,b){this._data=a,this._extras=b,extend(this,b)},EJS.Helpers.prototype={view:function(a,b,c){return c||(c=this._extras),b||(b=this._data),new EJS(a).render(b,c)},to_text:function(a,b){return null==a||void 0===a?b||"":a instanceof Date?a.toDateString():a.toString?a.toString().replace(/\n/g,"<br />").replace(/''/g,"'"):""}},EJS.newRequest=function(){for(var a=[function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=0;b<a.length;b++)try{var c=a[b]();if(null!=c)return c}catch(d){continue}},EJS.request=function(a){var b=new EJS.newRequest;b.open("GET",a,!1);try{b.send(null)}catch(c){return null}return 404==b.status||2==b.status||0==b.status&&""==b.responseText?null:b.responseText},EJS.ajax_request=function(a){a.method=a.method?a.method:"GET";var b=new EJS.newRequest;b.onreadystatechange=function(){4==b.readyState&&(200==b.status?a.onComplete(b):a.onComplete(b))},b.open(a.method,a.url),b.send(null)}}(),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";function c(a){var b,c;if(this._eventCache={},this._products=[],a)for(b=0,c=a.length;c>b;b++)this.add(a[b])}var d=a("./product");c.prototype.on=function(a,b){var c=this._eventCache[a];c||(c=this._eventCache[a]=[]),c.push(b)},c.prototype.off=function(a,b){var c,d,e=this._eventCache[a];if(e)for(c=0,d=e.length;d>c;c++)e[c]===b&&(e=e.splice(c,1))},c.prototype.fire=function(a){var b,c,d,e=this._eventCache[a];if(e)for(b=0,c=e.length;c>b;b++)d=e[b],"function"==typeof d&&d.apply(this,Array.prototype.slice.call(arguments,1))},c.prototype.add=function(a){var b=this,c=new d(a),e=this._products.push(a)-1;return c.on("change",function(a,c){b.fire("change",e,a,c)}),this.fire("add",e,a),e},c.prototype.get=function(a){return this._products[a]},c.prototype.getAll=function(){return this._products},c.prototype.total=function(){var a,b,c=this.getAll(),d=0;for(a=0,b=c.length;b>a;a++)d+=parseFloat(c[a].amount,2);return d.toFixed(2)},c.prototype.remove=function(a){var b=this._products.splice(a,1);return b&&this.fire("remove",a,b[0]),!!b.length},c.prototype.destroy=function(){this._products=[],this.fire("destroy")},b.exports=c},{"./product":4}],2:[function(a,b){"use strict";var c=b.exports={name:"PPMiniCart",parent:document.body,action:"https://www.paypal.com/cgi-bin/webscr",target:"",duration:30,cookiePath:"/",bn:"MiniCart_AddToCart_WPS_US",template:'<form method="post" action="<%= config.action %>" target="<%= config.target %>"><input type="hidden" name="cmd" value="_cart"><input type="hidden" name="upload" value="1"><input type="hidden" name="bn" value="<%= config.bn %>"><ul><% for (var items = cart.getAll(), i= 0, len = items.length; i < len; i++) { %><li class="minicart-item"><a class="minicart-name" href="<%= items[i].link %>"><%= items[i].item_name %></a><span class="minicart-number"><%= items[i].item_number %></span><input class="minicart-quantity" name="quantity_<%= i %>" autocomplete="off"><input type="button"><span class="minicart-price"><%= items[i].amount.toFixed(2) %></span><input type="hidden" name="item_name_<%= i %>" value="<%= items[i].item_name %>"><input type="hidden" name="item_number_<%= i %>" value="<%= items[i].item_number %>"><input type="hidden" name="amount_<%= i %>" value="<%= items[i].amount %>"></li><% } %></ul><div><div class="minicart-subtotal"><%= config.strings.subtotal %> <span class="minicart-subtotal-amount"><%= cart.total() %></span></div><div class="minicart-shipping"><%= config.strings.shipping %></div><input class="minicart-submit" type="submit" value="<%= config.strings.button %>" data-test-processing="<%= config.strings.processing %>"></div></form>',styles:"#PPMiniCart form { position: absolute; top: 50%; left: 50%; width: 300px; max-height: 400px; margin-left: -150px; margin-top: -200px; padding: 10px; background: #fff url(http://www.minicartjs.com/build/images/minicart_sprite.png) no-repeat -125px -60px; border: 1px solid #999; border-radius: 5px; box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.2); font: 13px/normal arial, helvetica; color: #333; }#PPMiniCart ul { margin: 45px 0 0; border-bottom: 1px solid #ccc; }#PPMiniCart .minicart-submit { padding: 1px 4px; background: #ffa822 url(http://www.minicartjs.com/build/images/minicart_sprite.png) repeat-x left center; border: 1px solid #d5bd98; border-right-color: #935e0d; border-bottom-color: #935e0d; border-radius: 2px; }",strings:{button:"Checkout",subtotal:"Subtotal: ",discount:"Discount: ",shipping:"Does not include shipping & tax",processing:"Processing..."}};b.exports.load=function(a){for(var b in a)c[b]=a[b];return c}},{}],3:[function(a,b){"use strict";function c(){i.el.innerHTML=h.template(g.template,i),i.show()}var d,e,f=a("./cart"),g=a("./config"),h=a("./util"),i={};i.render=function(a){var b,e,h;i.config=g.load(a),d=i.cart=new f,d.on("add",c),d.on("change",c),d.on("remove",c),b=i.el=document.createElement("div"),b.id=g.name,g.styles&&(h=document.createElement("style"),h.type="text/css",h.styleSheet?h.styleSheet.cssText=g.styles:h.appendChild(document.createTextNode(g.styles)),e=document.getElementsByTagName("head")[0],e.appendChild(h)),c(),g.parent.appendChild(b)},i.show=function(){e||(g.parent.classList.add("showing"),e=!0)},i.hide=function(){e&&(g.parent.classList.remove("showing"),e=!1)},i.toggle=function(){i[e?"hide":"show"]()},i.reset=function(){i.hide(),d.destroy(),c()},function(a){a.paypal||(a.paypal={}),a.paypal.minicart=i}(window||b.exports)},{"./cart":1,"./config":2,"./util":5}],4:[function(a,b){"use strict";function c(a){this._data=a,this._eventCache={}}c.prototype.on=function(a,b){var c=this._eventCache[a];c||(c=this._eventCache[a]=[]),c.push(b)},c.prototype.off=function(a,b){var c,d,e=this._eventCache[a];if(e)for(c=0,d=e.length;d>c;c++)e[c]===b&&(e=e.splice(c,1))},c.prototype.fire=function(a){var b,c,d,e=this._eventCache[a];if(e)for(b=0,c=e.length;c>b;b++)d=e[b],"function"==typeof d&&d.apply(this,Array.prototype.slice.call(arguments,1))},c.prototype.get=function(a){return this._data[a]},c.prototype.set=function(a,b){var c=(this._data[a]=b,{});c[a]=b,this.fire("change",c)},c.prototype.destroy=function(){this._data=[],this.fire("destroy",this)},b.exports=c},{}],5:[function(a,b){"use strict";var c=a("./config"),d={};d.template=function(a,b){return new EJS({text:a}).render(b)},d.event=function(){var a=[];return document.addEventListener?{add:function(b,c,d,e){e=e||b;var f=function(a){d.call(e,a)};b.addEventListener(c,f,!1),a.push([b,c,d,f])},remove:function(b,c,d){var e,f,g,h=a.length;for(g=0;h>g;g++)f=a[g],f[0]===b&&f[1]===c&&f[2]===d&&(e=f[3],e&&(b.removeEventListener(c,e,!1),delete a[g]))}}:document.attachEvent?{add:function(b,c,d,e){e=e||b;var f=function(){var a=window.event;a.target=a.target||a.srcElement,a.preventDefault=function(){a.returnValue=!1},d.call(e,a)};b.attachEvent("on"+c,f),a.push([b,c,d,f])},remove:function(b,c,d){var e,f,g,h=a.length;for(g=0;h>g;g++)f=a[g],f[0]===b&&f[1]===c&&f[2]===d&&(e=f[3],e&&(b.detachEvent("on"+c,e),delete a[g]))}}:void 0}(),d.storage=function(){var a=c.name;return window.localStorage?{load:function(){var b,c,e=localStorage.getItem(a);return e&&(e=JSON.parse(decodeURIComponent(e))),e&&e.expires&&(b=new Date,c=new Date(e.expires),b>c)?(d.storage.remove(),void 0):e&&e.value?e.value:e},save:function(b,c){var d,e,f,g,h=new Date,i=[];if(b){for(g=0,f=b.length;f>g;g++)e=b[g],i.push({product:e.product,settings:e.settings});h.setTime(h.getTime()+1e3*60*60*24*c),d={value:i,expires:h.toGMTString()},localStorage.setItem(a,encodeURIComponent(JSON.stringify(d)))}},remove:function(){localStorage.removeItem(a)}}:{load:function(){var b,c,d,e,f,g=a+"=";try{for(c=document.cookie.split(";"),f=0;f<c.length;f++){for(d=c[f];" "===d.charAt(0);)d=d.substring(1,d.length);0===d.indexOf(g)&&(e=d.substring(g.length,d.length),b=JSON.parse(decodeURIComponent(e)))}}catch(h){}return b},save:function(a,b){var d,e,f,g=new Date,h=[];if(a){for(f=0,e=a.length;e>f;f++)d=a[f],h.push({product:d.product,settings:d.settings});g.setTime(g.getTime()+1e3*60*60*24*b),document.cookie=c.name+"="+encodeURIComponent(JSON.stringify(h))+"; expires="+g.toGMTString()+"; path="+c.cookiePath}},remove:function(){this.save(null,-1)}}}(),d.currency=function(a,b){var c={AED:{before:"ج"},ANG:{before:"ƒ"},ARS:{before:"$"},AUD:{before:"$"},AWG:{before:"ƒ"},BBD:{before:"$"},BGN:{before:"лв"},BMD:{before:"$"},BND:{before:"$"},BRL:{before:"R$"},BSD:{before:"$"},CAD:{before:"$"},CHF:{before:""},CLP:{before:"$"},CNY:{before:"¥"},COP:{before:"$"},CRC:{before:"₡"},CZK:{before:"Kc"},DKK:{before:"kr"},DOP:{before:"$"},EEK:{before:"kr"},EUR:{before:"€"},GBP:{before:"£"},GTQ:{before:"Q"},HKD:{before:"$"},HRK:{before:"kn"},HUF:{before:"Ft"},IDR:{before:"Rp"},ILS:{before:"₪"},INR:{before:"Rs."},ISK:{before:"kr"},JMD:{before:"J$"},JPY:{before:"¥"},KRW:{before:"₩"},KYD:{before:"$"},LTL:{before:"Lt"},LVL:{before:"Ls"},MXN:{before:"$"},MYR:{before:"RM"},NOK:{before:"kr"},NZD:{before:"$"},PEN:{before:"S/"},PHP:{before:"Php"},PLN:{before:"z"},QAR:{before:"﷼"},RON:{before:"lei"},RUB:{before:"руб"},SAR:{before:"﷼"},SEK:{before:"kr"},SGD:{before:"$"},THB:{before:"฿"},TRY:{before:"TL"},TTD:{before:"TT$"},TWD:{before:"NT$"},UAH:{before:"₴"},USD:{before:"$"},UYU:{before:"$U"},VEF:{before:"Bs"},VND:{before:"₫"},XCD:{before:"$"},ZAR:{before:"R"}},d=c[b]||{},e=d.before||"",f=d.after||"";return e+a+f},d.getInputValue=function(a){var b=a.tagName.toLowerCase();return"select"===b?a.options[a.selectedIndex].value:"textarea"===b?a.innerText:"radio"===a.type?a.checked?a.value:null:"checkbox"===a.type?a.checked?a.value:null:a.value},b.exports=d},{"./config":2}]},{},[1,2,3,4,5]);